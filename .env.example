# ============================================================================
# MiraVeja Environment Configuration
# ============================================================================
# Copy this file to .env and update the values according to your environment
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
APPLICATION_HOST=miraveja.127.0.0.1.nip.io
DEBUG=false

# App Information
APP_NAME=Miraveja API
APP_VERSION=0.0.0

# Worker Information
WORKER_NAME=MiravejaWorker
WORKER_VERSION=0.0.0

# ----------------------------------------------------------------------------
# Docker-Compose Settings
# ----------------------------------------------------------------------------
DOCKER_SOCK_PATH=/var/run/docker.sock

# ----------------------------------------------------------------------------
# Traefik (Reverse Proxy)
# ----------------------------------------------------------------------------
TRAEFIK_WEB_PORT=80
TRAEFIK_WEB_SECURE_PORT=443
TRAEFIK_DASHBOARD_PORT=8080

# ----------------------------------------------------------------------------
# API Service
# ----------------------------------------------------------------------------
API_PORT=5000
API_BASE_PATH=api

# ----------------------------------------------------------------------------
# Frontend Service
# ----------------------------------------------------------------------------
FRONTEND_PORT=3000
FRONTEND_BASE_PATH=

# Frontend (Vite) Environment Variables
VITE_KEYCLOAK_URL=http://localhost:8080
VITE_KEYCLOAK_REALM=miraveja
VITE_KEYCLOAK_CLIENT_ID=miraveja-client
VITE_FRONTEND_BASE_PATH=

# ----------------------------------------------------------------------------
# PostgreSQL Database
# ----------------------------------------------------------------------------
POSTGRES_PORT=5432
POSTGRES_USER=miraveja_user
POSTGRES_PASSWORD=miraveja_password
POSTGRES_DB=miraveja_db

# Database Connection (for API/Worker services)
DATABASE_TYPE=postgresql
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USER=miraveja_user
DATABASE_PASSWORD=miraveja_password
DATABASE_NAME=miraveja_db
DATABASE_CONNECTION_URL=  # Optional: full connection URL overrides individual settings
DATABASE_MAX_CONNECTIONS=10
DATABASE_ECHO=false  # Set to true for SQL query logging

# Alembic (Database Migrations)
ALEMBIC_DATABASE_URL=postgresql://miraveja_user:miraveja_password@postgres:5432/miraveja_db

# ----------------------------------------------------------------------------
# MinIO (Object Storage)
# ----------------------------------------------------------------------------
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BASE_PATH=storage

# MinIO Credentials
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# MinIO Configuration (for API/Worker services)
MINIO_ENDPOINT=http://minio:9000
MINIO_OUTSIDE_ENDPOINT=https://miraveja.127.0.0.1.nip.io/storage/
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=miraveja-bucket
MINIO_REGION=  # Optional: e.g., us-east-1
MINIO_MAX_FILE_SIZE=134217728  # 128MB in bytes
MINIO_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif
MINIO_PRESIGNED_URL_EXPIRATION_SECONDS=3600

# ----------------------------------------------------------------------------
# Qdrant (Vector Database)
# ----------------------------------------------------------------------------
QDRANT_PORT=6333

# ----------------------------------------------------------------------------
# Kafka (Message Broker)
# ----------------------------------------------------------------------------
KAFKA_PORT=9092

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPIC_PREFIX=  # Optional: prefix for all topic names
KAFKA_SECURITY_PROTOCOL=PLAINTEXT  # Options: PLAINTEXT, SSL, SASL_PLAINTEXT, SASL_SSL
KAFKA_ENABLE_IDEMPOTENCE=true
KAFKA_COMPRESSION_TYPE=gzip  # Options: none, gzip, snappy, lz4, zstd
KAFKA_BATCH_SIZE=16384  # bytes
KAFKA_LINGER_MILLIS=0
KAFKA_BUFFER_MEMORY=33554432  # 32MB in bytes

# Kafka Producer Settings
KAFKA_PRODUCER_ACKS=all  # Options: 0, 1, all
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_RETRY_BACKOFF_MILLIS=100
KAFKA_PRODUCER_MAX_IN_FLIGHT_REQUESTS=5
KAFKA_PRODUCER_TIMEOUT_MILLIS=30000

# Kafka Consumer Settings
KAFKA_CONSUMER_GROUP_ID=miraveja-consumers
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest  # Options: earliest, latest, none
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
KAFKA_CONSUMER_AUTO_COMMIT_INTERVAL_MILLIS=5000
KAFKA_CONSUMER_SESSION_TIMEOUT_MILLIS=10000
KAFKA_CONSUMER_HEARTBEAT_INTERVAL_MILLIS=3000

# Kafka SASL Authentication (Optional)
# Uncomment if using SASL authentication
# KAFKA_SASL_MECHANISM=PLAIN  # Options: PLAIN, SCRAM-SHA-256, SCRAM-SHA-512
# KAFKA_SASL_USERNAME=your_username
# KAFKA_SASL_PASSWORD=your_password

# Kafka SSL Configuration (Optional)
# Uncomment if using SSL
# KAFKA_SSL_CAFILE=/path/to/ca-cert
# KAFKA_SSL_CERTFILE=/path/to/client-cert
# KAFKA_SSL_KEYFILE=/path/to/client-key
# KAFKA_SSL_PASSWORD=ssl_password

# ----------------------------------------------------------------------------
# Zookeeper
# ----------------------------------------------------------------------------
ZOOKEEPER_PORT=2181
ALLOW_ANONYMOUS_LOGIN=yes

# ----------------------------------------------------------------------------
# Keycloak (Authentication)
# ----------------------------------------------------------------------------
KEYCLOAK_PORT=8080
KC_BASE_PATH=auth

# Keycloak Admin Credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

# Keycloak Database Configuration
KC_DB=postgres
KC_DB_URL=jdbc:postgresql://postgres:5432/miraveja_db
KC_DB_USERNAME=miraveja_user
KC_DB_PASSWORD=miraveja_password

# Keycloak Configuration (for API/Worker services)
KEYCLOAK_SERVER_URL=http://keycloak:8080/auth/
KEYCLOAK_REALM=miraveja
KEYCLOAK_CLIENT_ID=miraveja-client
KEYCLOAK_CLIENT_SECRET=your_client_secret_here
KEYCLOAK_VERIFY_SSL=true  # Set to false for development
KEYCLOAK_PUBLIC_KEY=  # Optional: RSA public key for token verification
KEYCLOAK_TOKEN_ALGORITHM=RS256
KEYCLOAK_TOKEN_MIN_TTL=30  # Minimum time to live in seconds

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOGGER_NAME=MiravejaLogger
LOGGER_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGER_TARGET=console  # Options: console, file
LOGGER_FILENAME=  # Optional: log filename (e.g., app.log)
LOGGER_DIR=./logs  # Directory for log files (if LOGGER_TARGET=file)
