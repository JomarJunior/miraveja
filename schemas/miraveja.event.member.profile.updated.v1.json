{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "MemberProfileUpdatedEvent",
    "description": "Event representing the update of a member's profile",
    "required": ["memberId", "oldProfile", "newProfile", "aggregateId"],
    "properties": {
        "memberId": {
            "type": "string",
            "description": "The ID of the member"
        },
        "oldProfile": {
            "type": "object",
            "description": "The previous profile state",
            "properties": {
                "username": {
                    "type": "string",
                    "description": "Previous username"
                },
                "bio": {
                    "type": "string",
                    "description": "Previous bio"
                },
                "avatarId": {
                    "type": ["string", "null"],
                    "description": "Previous avatar image ID"
                },
                "coverId": {
                    "type": ["string", "null"],
                    "description": "Previous cover image ID"
                }
            }
        },
        "newProfile": {
            "type": "object",
            "description": "The new profile state",
            "properties": {
                "username": {
                    "type": "string",
                    "description": "New username"
                },
                "bio": {
                    "type": "string",
                    "description": "New bio"
                },
                "avatarId": {
                    "type": ["string", "null"],
                    "description": "New avatar image ID"
                },
                "coverId": {
                    "type": ["string", "null"],
                    "description": "New cover image ID"
                }
            }
        },
        "aggregateId": {
            "type": "string",
            "description": "The ID of the aggregate (same as memberId)"
        }
    }
}